<html>
 <head>
   <title>Mocha</title>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <link rel="stylesheet" href="/mocha/mocha.css">


   <link rel="stylesheet" href="/mocha/mocha.css" />
   <script src="/mocha/mocha.js"></script>
   <script src="/chai/chai.js"></script>
   <script>mocha.setup('bdd')</script>
   <script>
     function assert(expr, msg) {
       if (!expr) throw new Error(msg || 'failed');
     }
     var expect = chai.expect;
   </script>

<!--   <script src="/jasmine/lib/jasmine-core/jasmine.js"></script>
  <script src="/jasmine/lib/jasmine-core/jasmine-html.js"></script>
  <script src="/jasmine/lib/jasmine-core/boot.js"></script> -->

  <script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script>


   <!-- Source file -->
  <script type="text/javascript">

    var testing = new Firebase('https://dazzling-torch-169.firebaseio.com/code');

    testing.on('value', function(snapshot) {
      var g = document.createElement('script');
      var s = document.getElementsByTagName('script')[0];
      g.text = snapshot.val();
      // g.text += ";(function() { \n jasmine.getEnv().execute(); })()"
      s.parentNode.insertBefore(g, s);
      mocha.run();
    })


  </script>

   <!-- Test file -->
  <script type="text/javascript"><%- test %> </script>

 </head>
 <body>
   <div id="mocha"></div>
 </body>
</html>
